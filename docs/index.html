<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/counsel/component---src-components-page-template-tsx.b632e5eae9bd61b3606c.css">:root{--bg-color:#fff;--text-primary-color:#003558;--text-primary-color-light:#014572;--text-anchor-color:#0a598c}body,html{background:var(--bg-color);box-sizing:border-box;color:var(--text-primary-color);margin:0;padding:0}#root{display:grid;font-family:Ubuntu Mono,sans-serif;font-size:120%;grid-template-areas:"bufl primary nav bufr";grid-template-columns:1fr auto auto 1fr;height:100vh;text-align:justify;width:100vw}p{font-family:Helvetica,sans-serif}.gatsby-highlight{font-size:80%}#header{padding:50px 0 0}#header h1{margin-bottom:0;margin-top:20px}#header__logo{width:100px;margin:0}h1{font-family:Ubuntu Mono,monospace;font-size:64px}h1,h2,h3,h4,h5{color:#003558}a{color:var(--text-anchor-color);text-decoration:none}a:hover{color:#0a598c;text-decoration:underline}#primary{grid-column-start:2;max-width:700px;padding-right:20px}#primary img{max-width:100%}#nav-menu{font-size:130%;grid-column-start:3;margin:0;width:160px;padding:40px 0 0 10px;text-align:left}#nav-sticker{position:-webkit-sticky;position:sticky;top:40px}#nav-menu h3{margin:0}#nav-menu h4,#nav-menu h5{margin:20px 0 0}#nav-menu ul{list-style:none;margin:0;padding-left:0}#nav-menu li{padding-top:10px;margin:0}.nav-depth-2{font-size:90%}.nav-depth-3{font-size:80%;font-size:70%}.nav-depth-4{font-size:60%}</style><style data-href="/counsel/app.7a7fd10b08846091aeed.css">code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.0.119"/><title data-react-helmet="true"></title><link data-react-helmet="true" href="https://fonts.googleapis.com/css?family=Ubuntu+Mono" rel="stylesheet"/><link as="script" rel="preload" href="/counsel/webpack-runtime-6b14abb27723fcb70d5f.js"/><link as="script" rel="preload" href="/counsel/app-bfa3e460b3b5be4ad5f6.js"/><link as="script" rel="preload" href="/counsel/0-81e93c76daa99e1b0204.js"/><link as="script" rel="preload" href="/counsel/component---src-components-page-template-tsx-1e217eaccd0966b35062.js"/><link as="fetch" rel="preload" href="/counsel/static/d/455/path---docs-7-e-8-9d0-wnAGvZCpHSKMg67PpwfyAXcjzOQ.json" crossOrigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div id="root"><div id="primary"><div id="header"><a href="/counsel/"><img id="header__logo" src="/counsel/static/counsel-16e8e4a3b48d2e8c7686a05188cb5893.png"/></a><h1>counsel</h1></div><h1 style="font-size:1.9em">getting started</h1><div><p><a name='install'></a></p>
<h2>install</h2>
<p><code class="language-text">yarn add --dev counsel</code></p>
<p>alternatively, <code class="language-text">npm install --save-dev counsel</code></p>
<p><a name='usage'></a></p>
<h2>usage</h2>
<p>conventional usage is to add a <code class="language-text">.counsel.ts</code> file to your project root dirname.</p>
<p>you can have counsel insert a generic <code class="language-text">.counsel.ts</code> file for you using <code class="language-text">--init</code>:</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">$ counsel --init
info: ⚙️ config file .counsel.ts created successfully</code></pre></div>
<p>alternatively, as shown next, we can bootstrap our own <code class="language-text">counsel.ts</code> file.</p>
<p>once a project has a counsel file, run various counsel commands:</p>
<ul>
<li><code class="language-text">npx counsel apply</code></li>
</ul>
<p><img src="/counsel/demo-apply-bef8a2b7283196e26d7cc45340443922.svg"></p>
<ul>
<li><code class="language-text">npx counsel check</code></li>
</ul>
<p><img src="/counsel/demo-check-fail-3bbadc2679cded8760d4557785ee2794.svg"></p>
<p><code class="language-text">npx counsel --help</code> is also there to help!</p>
<p><a name='concepts'></a></p>
<h2>concepts</h2>
<p>counsel has only one major concept to understand--the <code class="language-text">Rule</code>.  counsel can apply rules
and check that rules are enforced.  counsel rules are specified using a <code class="language-text">.counsel.ts</code> file, hereby "counsel file."  let's look at counsel files and rules next.</p>
<p><a name='counselfile'></a></p>
<h3>counsel file</h3>
<p>the counsel file declares and exports <code class="language-text">Rule</code>s.  the only expectation is that
it exports a function named <code class="language-text">create</code> with following signature:</p>
<p><code class="language-text">ContextWithRules =&gt; ContextWithRules</code></p>
<p>let's create a basic rule that enforces that the project has a readme file:</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token comment">// .counsel.ts</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> assertReadmeExists<span class="token punctuation">:</span> Rule <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'assert-readme-exists'</span><span class="token punctuation">,</span>
  check<span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> fs<span class="token punctuation">,</span> path<span class="token punctuation">,</span> ctx<span class="token punctuation">:</span> <span class="token punctuation">{</span> projectDirname <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> filename <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>projectDirname<span class="token punctuation">,</span> <span class="token string">'readme.md'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> isReadable <span class="token operator">=</span> <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">lstat</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isReadable<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'readme.md file missing'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// export your rules via a `create` function</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">create</span> <span class="token punctuation">(</span>opts<span class="token punctuation">:</span> ContextWithRules<span class="token punctuation">)</span> <span class="token operator">=></span>
  <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>opts<span class="token punctuation">,</span> rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>assertReadmeExists<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>create, import, and use as many rules as desired.  rules can be used for all sorts
of reasons.  sky is the limit.</p>
<p><a name='rule'></a></p>
<h3>rule</h3>
<p><code class="language-text">Rule</code>s are basic interfaces with:</p>
<ol>
<li>a <a href="#rulename"><code class="language-text">name</code></a></li>
<li>an optional <a href="#ruleplan"><code class="language-text">plan</code></a> function</li>
<li>an optional <a href="#rulecheck"><code class="language-text">check</code></a> function</li>
<li>an optional list of <a href="#ruledependencies"><code class="language-text">dependencies</code></a></li>
<li>an optional list of <a href="#ruledevdependencies"><code class="language-text">devDependencies</code></a></li>
</ol>
<p>in a nut-shell, <em>that's it</em>.  counsel is a small set of functions that run these
<code class="language-text">Rule</code>s against your project.</p>
<p>here's a simple rule that exercises some of the rule api:</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">const</span> exampleRule<span class="token punctuation">:</span> Rule <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'example-rule'</span><span class="token punctuation">,</span>
  plan<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> ctx <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token string">`planning to add keyword 'example' to pkg: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ctx<span class="token punctuation">.</span>packageJson<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
    <span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      ctx<span class="token punctuation">.</span>packageJson<span class="token punctuation">.</span>keywords <span class="token operator">=</span> ctx<span class="token punctuation">.</span>packageJson<span class="token punctuation">.</span>keywords <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      ctx<span class="token punctuation">.</span>packageJson<span class="token punctuation">.</span>keywords<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  check<span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> ctx<span class="token punctuation">:</span> <span class="token punctuation">{</span> packageJson <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> keywords <span class="token operator">=</span> packageJson<span class="token punctuation">.</span>keywords <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`existing keywords: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>keywords<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> keywordExists <span class="token operator">=</span> keywords<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>val <span class="token operator">=></span> val <span class="token operator">===</span> <span class="token string">'example'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>keywordExists<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"'example' keyword missing"</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  devDependencies<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'debug'</span><span class="token punctuation">,</span> range<span class="token punctuation">:</span> <span class="token string">'*'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p><a name='rulename'></a></p>
<h3>rule.name</h3>
<p>every rule requires a <code class="language-text">name</code>.  it must always be a <code class="language-text">string</code>.</p>
<p><a name='ruleplan'></a></p>
<h3>rule.plan</h3>
<p>a <code class="language-text">plan</code> returns a function or <code class="language-text">null</code>, which we call a <code class="language-text">Migration</code>.  a <code class="language-text">Migration</code> is responsible for changing the project in some way.  rather than mutating the project upfront, all changes to a project are encouraged to happen in the <code class="language-text">Migration</code>.  this gives the user an opporitunity to <em>opt-out</em> of rules in counsel's interactive mode.</p>
<p>for example, here's a simplified version of counsel's baked in <code class="language-text">copy</code> rule:</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">CopyRule</span> <span class="token punctuation">{</span>
  src<span class="token punctuation">:</span> <span class="token builtin">string</span>
  dest<span class="token punctuation">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">plan</span> <span class="token operator">=</span> <span class="token punctuation">(</span>opts<span class="token punctuation">:</span> TaskPayload<span class="token operator">&lt;</span>CopyRule<span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">=></span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> fs<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>opts<span class="token punctuation">.</span>rule<span class="token punctuation">.</span>src<span class="token punctuation">,</span> opts<span class="token punctuation">.</span>rule<span class="token punctuation">.</span>dest<span class="token punctuation">)</span></code></pre></div>
<p>the <code class="language-text">() =&gt; fs.copy(...)</code> matches the <code class="language-text">Migration</code> type, so it should be set!
plan receives a <a href="#taskpayload">TaskPayload</a> as input, covered later.</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">type</span> Migration <span class="token operator">=</span>
  <span class="token keyword">null</span> <span class="token comment">// return null when there is nothing to migrate</span>
  <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span> <span class="token operator">|</span> Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token comment">// otherwise, migrate in a returned function</span></code></pre></div>
<p><a name='rulecheck'></a></p>
<h3>rule.check</h3>
<p>check recieves a <a href="#taskpayload">TaskPayload</a> as is responsible for ensuring
that a rule is enforced.  we've already seen a few examples of check functions:</p>
<ul>
<li><a href="#rule">asserting that a keyword was added</a></li>
<li><a href="##counselfile">asserting that a readme file exists</a></li>
</ul>
<p>check functions should:</p>
<ul>
<li>be synchronous, or return a promise</li>
<li><code class="language-text">throw</code> (or reject) <code class="language-text">Error</code>s when a violation is detected</li>
<li>tend to be lenient</li>
</ul>
<p>on the topic of leniency, consider counsel's baked in <code class="language-text">ScriptRule</code>.
if you wanted a rule to provide a default npm script named <code class="language-text">test</code>,
where the test command was <code class="language-text">node test/index.js</code>, consider if the project added a
timeout flag, such as <code class="language-text">&quot;test&quot;: &quot;node test/index.js --timeout 10s&quot;</code>.</p>
<p>it would be a bad user experience to <code class="language-text">throw</code> if the script did not strictly equal <code class="language-text">node test/index.js</code>.
adding a simple flag is likely something that rule implementer would be OK with.
more imporantly, the core intent of the rule is likely to assert that the user
has written tests.  a better <code class="language-text">check</code> implementation would be to ensure that a <code class="language-text">test</code>
script is present, and is truthy (i.e. runs <em>some test script</em>).  enforcing rules
at any given granularity is something that needs to be worked through with rule makers and
their teams.  <strong>be weary of agitating consumers by implementing
overly strict checks</strong>.</p>
<p><a name='ruledependencies'></a>
<a name='ruledevdependencies'></a></p>
<h3>rule.dependencies</h3>
<p>rules can request dependencies &#x26; devDependencies to be installed.  dependencies
are always requested in a range format:</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> installRule<span class="token punctuation">:</span> Rule <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'install-koa'</span><span class="token punctuation">,</span>
  dependencies<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'koa'</span><span class="token punctuation">,</span> range<span class="token punctuation">:</span> <span class="token string">'^2'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  devDependencies<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'node-fetch'</span><span class="token punctuation">:</span> range<span class="token punctuation">:</span> <span class="token string">'*'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>by using <a href="https://www.npmjs.com/package/semver">semver</a> ranges, you can pin dependencies
with moderate precision or flexibility.</p>
<p><a name='typings'></a></p>
<h2>typings</h2>
<p>it is worth brief mention that the majority of counsel's interfaces/typings are packed nicely
into a &#x3C; 100 LOC file <a href="https://github.com/cdaringe/counsel/blob/master/src/interfaces.ts">here, for your viewing</a>.</p>
<p><a name='taskpayload'></a></p>
<h3>TaskPayload</h3>
<p><code class="language-text">plan</code> and <code class="language-text">check</code> receive a task payload as input. the payload is rich with
data and async functions to help plan and check. check out the typings in the
<a href="https://github.com/cdaringe/counsel/blob/7537c31c3cce4bdaaaae18718b53cf9719bb29fb/src/interfaces.ts#L67">source code</a> (<a href="https://github.com/cdaringe/counsel/blob/7537c31c3cce4bdaaaae18718b53cf9719bb29fb/src/interfaces.ts#L28">1</a>, <a href="https://github.com/cdaringe/counsel/blob/7537c31c3cce4bdaaaae18718b53cf9719bb29fb/src/interfaces.ts#L46">2</a>).</p>
<p><a name='batteries'></a></p>
<h2>batteries</h2>
<p>counsel exports a handful of common and helpful rules. <strong>batteries included!</strong></p>
<p>see <code class="language-text">counsel.rules</code>, or <a href="./src/rules">src/rules</a> to see a handful.  at the time of
writing, these default rules include:</p>
<p><a name='copy'></a></p>
<h4>copy</h4>
<ul>
<li><a href="https://github.com/cdaringe/counsel/blob/master/src/rules/copy.ts">copy</a> - copies files or folders into a project</li>
</ul>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> rules <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'counsel'</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> plan <span class="token punctuation">}</span> <span class="token operator">=</span> rules<span class="token punctuation">.</span>copy
<span class="token keyword">const</span> rule<span class="token punctuation">:</span> CopyRule <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'copy-markdown-file-test'</span><span class="token punctuation">,</span>
  src<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'readme-template.md'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  dest<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>projectDirname<span class="token punctuation">,</span> <span class="token string">'readme.md'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  plan
<span class="token punctuation">}</span></code></pre></div>
<p><a name='filenameformat'></a></p>
<h4>filename-format</h4>
<ul>
<li><a href="https://github.com/cdaringe/counsel/blob/master/src/rules/filename-format.ts">filename-format</a> - enforces a filename-format convention</li>
</ul>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> kebabCase <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lodash'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> rules <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'counsel'</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> check <span class="token punctuation">}</span> <span class="token operator">=</span> rules<span class="token punctuation">.</span>filenameFormat

<span class="token keyword">const</span> rule<span class="token punctuation">:</span> FilenameFormatRule <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'test-filename-rule'</span><span class="token punctuation">,</span>
  filenameFormatExtensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'js'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  filenameFormatExclude<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'coffee'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  filenameFormatFunction<span class="token punctuation">:</span> kebabCase<span class="token punctuation">,</span>
  check
<span class="token punctuation">}</span>
<span class="token comment">// test-file.js // ok</span>
<span class="token comment">// functional-module.js // ok</span>
<span class="token comment">// SomeFile // not ok</span></code></pre></div>
<p><a name='githook'></a></p>
<h4>githook</h4>
<ul>
<li><a href="https://github.com/cdaringe/counsel/blob/master/src/rules/githook.ts">githook</a> - installs githook support via <a href="https://www.npmjs.com/package/husky">husky</a> into a project</li>
</ul>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> rules <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'counsel'</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> create <span class="token punctuation">}</span> <span class="token operator">=</span> rules<span class="token punctuation">.</span>githook

<span class="token keyword">const</span> rule<span class="token punctuation">:</span> GitHooksRule <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'lint-on-commit'</span><span class="token punctuation">,</span>
  hooks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'pre-commit'</span><span class="token punctuation">:</span> <span class="token string">'yarn lint'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p><a name='readme'></a></p>
<h4>readme</h4>
<ul>
<li><a href="https://github.com/cdaringe/counsel/blob/master/src/rules/readme.ts">readme</a> - enforces that a project has a readme file</li>
</ul>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> rules <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'counsel'</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> rule <span class="token punctuation">}</span> <span class="token operator">=</span> rules<span class="token punctuation">.</span>readme</code></pre></div>
<p><a name='script'></a></p>
<h4>script</h4>
<ul>
<li><a href="https://github.com/cdaringe/counsel/blob/master/src/rules/script.ts">script</a> - installs a npm script to a project</li>
</ul>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> rules <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'counsel'</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> create <span class="token punctuation">}</span> <span class="token operator">=</span> rules<span class="token punctuation">.</span>script
<span class="token keyword">const</span> rule<span class="token punctuation">:</span> criptRule <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'add-test-script-rule'</span><span class="token punctuation">,</span>
  scriptName<span class="token punctuation">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
  scriptCommand<span class="token punctuation">:</span> <span class="token string">'tape test/blah.js'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p><a name='examples'></a></p>
<h2>examples</h2>
<ul>
<li>
<p><a href='https://github.com/cdaringe/counsel/blob/master/src/rulesets/nodelib.ts' target='_blank'>node library example ruleset</a></p>
<ul>
<li>see it used <a href="https://github.com/cdaringe/counsel/blob/master/.counsel.ts">in this project, here</a></li>
</ul>
</li>
</ul>
<p><a name='similarworks'></a></p>
<h2>similar works</h2>
<ul>
<li>
<p><a href="https://github.com/FormidableLabs/builder">FormidableLabs/builder</a></p>
<ul>
<li>counsel is very similar to builder, but counsel doesn't <em>need</em> to be yet-another-task-runner.  you can <code class="language-text">npx counsel apply</code>, never fully install it, and reap many of it's benefits.</li>
<li>builder also claims flexibility and an anti-"buy the farm" attitude.  in practice, we've observed the opposite.  feel free to try both! :)</li>
</ul>
</li>
</ul>
<div style='margin-bottom: 100px;'></div></div></div><nav id="nav-menu"><div id="nav-sticker"><h3>nav</h3><ul><li><a href="/counsel/">home</a></li><li><a aria-current="page" class="" href="/counsel/docs/">docs</a></li></ul><hr/><ul><li class="nav-depth-2"><a href="/counsel/docs/#install">install</a></li><li class="nav-depth-2"><a href="/counsel/docs/#usage">usage</a></li><li class="nav-depth-2"><a href="/counsel/docs/#concepts">concepts</a></li><li class="nav-depth-3"><a href="/counsel/docs/#counselfile">counsel file</a></li><li class="nav-depth-3"><a href="/counsel/docs/#rule">rule</a></li><li class="nav-depth-3"><a href="/counsel/docs/#rulename">rule.name</a></li><li class="nav-depth-3"><a href="/counsel/docs/#ruleplan">rule.plan</a></li><li class="nav-depth-3"><a href="/counsel/docs/#rulecheck">rule.check</a></li><li class="nav-depth-3"><a href="/counsel/docs/#ruledependencies">rule.dependencies</a></li><li class="nav-depth-2"><a href="/counsel/docs/#typings">typings</a></li><li class="nav-depth-3"><a href="/counsel/docs/#taskpayload">TaskPayload</a></li><li class="nav-depth-2"><a href="/counsel/docs/#batteries">batteries</a></li><li class="nav-depth-4"><a href="/counsel/docs/#copy">copy</a></li><li class="nav-depth-4"><a href="/counsel/docs/#filenameformat">filename-format</a></li><li class="nav-depth-4"><a href="/counsel/docs/#githook">githook</a></li><li class="nav-depth-4"><a href="/counsel/docs/#readme">readme</a></li><li class="nav-depth-4"><a href="/counsel/docs/#script">script</a></li><li class="nav-depth-2"><a href="/counsel/docs/#examples">examples</a></li><li class="nav-depth-2"><a href="/counsel/docs/#similarworks">similar works</a></li></ul></div></nav></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-components-page-template-tsx","jsonName":"docs-7e8","path":"/docs/"};window.dataPath="455/path---docs-7-e-8-9d0-wnAGvZCpHSKMg67PpwfyAXcjzOQ";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app.7a7fd10b08846091aeed.css","/app-bfa3e460b3b5be4ad5f6.js"],"component---src-components-page-template-tsx":["/component---src-components-page-template-tsx.b632e5eae9bd61b3606c.css","/component---src-components-page-template-tsx-1e217eaccd0966b35062.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx.5e9ea4417a2d449f701e.css","/component---src-pages-index-tsx-d598e47b05aaaf7765d6.js"],"pages-manifest":["/pages-manifest-18c108c9714e77806971.js"]};/*]]>*/</script><script src="/counsel/component---src-components-page-template-tsx-1e217eaccd0966b35062.js" async=""></script><script src="/counsel/0-81e93c76daa99e1b0204.js" async=""></script><script src="/counsel/app-bfa3e460b3b5be4ad5f6.js" async=""></script><script src="/counsel/webpack-runtime-6b14abb27723fcb70d5f.js" async=""></script></body></html>